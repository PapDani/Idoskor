<div class="max-w-md mx-auto p-4">
  <h2 class="text-xl mb-4">
    {{ isEdit ? 'Edit Card' : 'New Card' }}
  </h2>

  <button mat-button
          color="accent"
          (click)="goBack()">
    ‚Üê Back to list
  </button>

  <div class="form-preview-container">
    <div class="form-column">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">

        <!-- TITLE -->
        <mat-form-field appearance="fill" class="w-full mb-4">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" placeholder="Enter card title">
          <mat-error *ngIf="form.controls['title'].invalid && form.controls['title'].touched">
            Title is required
          </mat-error>
        </mat-form-field>

        <!-- IMAGE FILE -->
        <div class="mb-4">
          <mat-label>Image File</mat-label>
          <input type="file"
                 (change)="onFileSelected($event)"
                 accept="image/*"
                 class="w-full block" />
          <mat-error *ngIf="fileTouched && !selectedFile">
            Image is required
          </mat-error>
        </div>

        <!-- CONTENT URL / TEXTAREA -->
        <mat-form-field appearance="fill" class="w-full mb-4">
          <mat-label>Content URL</mat-label>
          <textarea matInput formControlName="contentUrl" rows="3" placeholder="Enter URL or content"></textarea>
          <mat-error *ngIf="form.controls['contentUrl'].invalid && form.controls['contentUrl'].touched">
            Content is required
          </mat-error>
        </mat-form-field>

        <!-- ACTION BUTTONS -->
        <div class="flex space-x-2">
          <button mat-raised-button
                  color="primary"
                  type="submit"
                  [disabled]="form.invalid || (!selectedFile && !isEdit)">
            {{ isEdit ? 'Save Changes' : 'Create Card' }}
          </button>
          <button *ngIf="isEdit"
                  mat-raised-button
                  color="warn"
                  type="button"
                  (click)="onDelete()">
            Delete
          </button>
        </div>
      </form>

    </div>
    <div class="preview-column">
      <mat-card class="example-card">
        <img mat-card-image
             [src]="preview.imageSrc"
             [alt]="preview.title"
             class="exampl  e-header-image" />
        <mat-card-header>
          <mat-card-title>{{ preview.title || 'Title will appear here' }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>{{ preview.contentUrl || 'Content URL will appear here' }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
